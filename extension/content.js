(function(){"use strict";var N,y,pe,$,_e,fe,X,J,Y,Z,I={},he=[],Ke=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Q=Array.isArray;function L(e,t){for(var n in t)e[n]=t[n];return e}function ve(e){var t=e.parentNode;t&&t.removeChild(e)}function me(e,t,n){var o,r,a,d={};for(a in t)a=="key"?o=t[a]:a=="ref"?r=t[a]:d[a]=t[a];if(arguments.length>2&&(d.children=arguments.length>3?N.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)d[a]===void 0&&(d[a]=e.defaultProps[a]);return U(e,d,o,r,null)}function U(e,t,n,o,r){var a={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++pe,__i:-1,__u:0};return r==null&&y.vnode!=null&&y.vnode(a),a}function D(e){return e.children}function R(e,t){this.props=e,this.context=t}function O(e,t){if(t==null)return e.__?O(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?O(e):null}function ge(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return ge(e)}}function ye(e){(!e.__d&&(e.__d=!0)&&$.push(e)&&!j.__r++||_e!==y.debounceRendering)&&((_e=y.debounceRendering)||fe)(j)}function j(){var e,t,n,o,r,a,d,u;for($.sort(X);e=$.shift();)e.__d&&(t=$.length,o=void 0,a=(r=(n=e).__v).__e,d=[],u=[],n.__P&&((o=L({},r)).__v=r.__v+1,y.vnode&&y.vnode(o),ee(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[a]:null,d,a??O(r),!!(32&r.__u),u),o.__v=r.__v,o.__.__k[o.__i]=o,Se(d,o,u),o.__e!=a&&ge(o)),$.length>t&&$.sort(X));j.__r=0}function be(e,t,n,o,r,a,d,u,c,s,p){var i,h,_,m,k,g=o&&o.__k||he,f=t.length;for(n.__d=c,Ve(n,t,g),c=n.__d,i=0;i<f;i++)(_=n.__k[i])!=null&&typeof _!="boolean"&&typeof _!="function"&&(h=_.__i===-1?I:g[_.__i]||I,_.__i=i,ee(e,_,h,r,a,d,u,c,s,p),m=_.__e,_.ref&&h.ref!=_.ref&&(h.ref&&te(h.ref,null,_),p.push(_.ref,_.__c||m,_)),k==null&&m!=null&&(k=m),65536&_.__u||h.__k===_.__k?c=xe(_,c,e):typeof _.type=="function"&&_.__d!==void 0?c=_.__d:m&&(c=m.nextSibling),_.__d=void 0,_.__u&=-196609);n.__d=c,n.__e=k}function Ve(e,t,n){var o,r,a,d,u,c=t.length,s=n.length,p=s,i=0;for(e.__k=[],o=0;o<c;o++)d=o+i,(r=e.__k[o]=(r=t[o])==null||typeof r=="boolean"||typeof r=="function"?null:typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?U(null,r,null,null,null):Q(r)?U(D,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?U(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)!=null?(r.__=e,r.__b=e.__b+1,u=Xe(r,n,d,p),r.__i=u,a=null,u!==-1&&(p--,(a=n[u])&&(a.__u|=131072)),a==null||a.__v===null?(u==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):u!==d&&(u==d-1?i--:u==d+1?i++:u>d?p>c-d?i+=u-d:i--:u<d&&(u==d-i?i-=u-d:i++),u!==o+i&&(r.__u|=65536))):(a=n[d])&&a.key==null&&a.__e&&!(131072&a.__u)&&(a.__e==e.__d&&(e.__d=O(a)),ne(a,a,!1),n[d]=null,p--);if(p)for(o=0;o<s;o++)(a=n[o])!=null&&!(131072&a.__u)&&(a.__e==e.__d&&(e.__d=O(a)),ne(a,a))}function xe(e,t,n){var o,r;if(typeof e.type=="function"){for(o=e.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=e,t=xe(o[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=O(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function Xe(e,t,n,o){var r=e.key,a=e.type,d=n-1,u=n+1,c=t[n];if(c===null||c&&r==c.key&&a===c.type&&!(131072&c.__u))return n;if(o>(c!=null&&!(131072&c.__u)?1:0))for(;d>=0||u<t.length;){if(d>=0){if((c=t[d])&&!(131072&c.__u)&&r==c.key&&a===c.type)return d;d--}if(u<t.length){if((c=t[u])&&!(131072&c.__u)&&r==c.key&&a===c.type)return u;u++}}return-1}function we(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Ke.test(t)?n:n+"px"}function B(e,t,n,o,r){var a;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||we(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||we(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")a=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?o?n.u=o.u:(n.u=J,e.addEventListener(t,a?Z:Y,a)):e.removeEventListener(t,a?Z:Y,a);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function ke(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=J++;else if(t.t<n.u)return;return n(y.event?y.event(t):t)}}}function ee(e,t,n,o,r,a,d,u,c,s){var p,i,h,_,m,k,g,f,v,S,b,M,C,Ge,K,ue,T=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),a=[u=t.__e=n.__e]),(p=y.__b)&&p(t);e:if(typeof T=="function")try{if(f=t.props,v="prototype"in T&&T.prototype.render,S=(p=T.contextType)&&o[p.__c],b=p?S?S.props.value:p.__:o,n.__c?g=(i=t.__c=n.__c).__=i.__E:(v?t.__c=i=new T(f,b):(t.__c=i=new R(f,b),i.constructor=T,i.render=Ye),S&&S.sub(i),i.props=f,i.state||(i.state={}),i.context=b,i.__n=o,h=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&T.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=L({},i.__s)),L(i.__s,T.getDerivedStateFromProps(f,i.__s))),_=i.props,m=i.state,i.__v=t,h)v&&T.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&T.getDerivedStateFromProps==null&&f!==_&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(f,b),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(f,i.__s,b)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(i.props=f,i.state=i.__s,i.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(V){V&&(V.__=t)}),M=0;M<i._sb.length;M++)i.__h.push(i._sb[M]);i._sb=[],i.__h.length&&d.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(f,i.__s,b),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(_,m,k)})}if(i.context=b,i.props=f,i.__P=e,i.__e=!1,C=y.__r,Ge=0,v){for(i.state=i.__s,i.__d=!1,C&&C(t),p=i.render(i.props,i.state,i.context),K=0;K<i._sb.length;K++)i.__h.push(i._sb[K]);i._sb=[]}else do i.__d=!1,C&&C(t),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++Ge<25);i.state=i.__s,i.getChildContext!=null&&(o=L(L({},o),i.getChildContext())),v&&!h&&i.getSnapshotBeforeUpdate!=null&&(k=i.getSnapshotBeforeUpdate(_,m)),be(e,Q(ue=p!=null&&p.type===D&&p.key==null?p.props.children:p)?ue:[ue],t,n,o,r,a,d,u,c,s),i.base=t.__e,t.__u&=-161,i.__h.length&&d.push(i),g&&(i.__E=i.__=null)}catch(V){if(t.__v=null,c||a!=null){for(t.__u|=c?160:32;u&&u.nodeType===8&&u.nextSibling;)u=u.nextSibling;a[a.indexOf(u)]=null,t.__e=u}else t.__e=n.__e,t.__k=n.__k;y.__e(V,t,n)}else a==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Je(n.__e,t,n,o,r,a,d,c,s);(p=y.diffed)&&p(t)}function Se(e,t,n){t.__d=void 0;for(var o=0;o<n.length;o++)te(n[o],n[++o],n[++o]);y.__c&&y.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(a){a.call(r)})}catch(a){y.__e(a,r.__v)}})}function Je(e,t,n,o,r,a,d,u,c){var s,p,i,h,_,m,k,g=n.props,f=t.props,v=t.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),a!=null){for(s=0;s<a.length;s++)if((_=a[s])&&"setAttribute"in _==!!v&&(v?_.localName===v:_.nodeType===3)){e=_,a[s]=null;break}}if(e==null){if(v===null)return document.createTextNode(f);e=document.createElementNS(r,v,f.is&&f),a=null,u=!1}if(v===null)g===f||u&&e.data===f||(e.data=f);else{if(a=a&&N.call(e.childNodes),g=n.props||I,!u&&a!=null)for(g={},s=0;s<e.attributes.length;s++)g[(_=e.attributes[s]).name]=_.value;for(s in g)if(_=g[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=_;else if(s!=="key"&&!(s in f)){if(s=="value"&&"defaultValue"in f||s=="checked"&&"defaultChecked"in f)continue;B(e,s,null,_,r)}}for(s in f)_=f[s],s=="children"?h=_:s=="dangerouslySetInnerHTML"?p=_:s=="value"?m=_:s=="checked"?k=_:s==="key"||u&&typeof _!="function"||g[s]===_||B(e,s,_,g[s],r);if(p)u||i&&(p.__html===i.__html||p.__html===e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(i&&(e.innerHTML=""),be(e,Q(h)?h:[h],t,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,a,d,a?a[0]:n.__k&&O(n,0),u,c),a!=null)for(s=a.length;s--;)a[s]!=null&&ve(a[s]);u||(s="value",m!==void 0&&(m!==e[s]||v==="progress"&&!m||v==="option"&&m!==g[s])&&B(e,s,m,g[s],r),s="checked",k!==void 0&&k!==e[s]&&B(e,s,k,g[s],r))}return e}function te(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(r){y.__e(r,n)}}function ne(e,t,n){var o,r;if(y.unmount&&y.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||te(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(a){y.__e(a,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&ne(o[r],t,n||typeof e.type!="function");n||e.__e==null||ve(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function Ye(e,t,n){return this.constructor(e,n)}function Ee(e,t,n){var o,r,a,d;y.__&&y.__(e,t),r=(o=!1)?null:t.__k,a=[],d=[],ee(t,e=t.__k=me(D,null,[e]),r||I,I,t.namespaceURI,r?null:t.firstChild?N.call(t.childNodes):null,a,r?r.__e:t.firstChild,o,d),Se(a,e,d)}N=he.slice,y={__e:function(e,t,n,o){for(var r,a,d;t=t.__;)if((r=t.__c)&&!r.__)try{if((a=r.constructor)&&a.getDerivedStateFromError!=null&&(r.setState(a.getDerivedStateFromError(e)),d=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),d=r.__d),d)return r.__E=r}catch(u){e=u}throw e}},pe=0,R.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=L({},this.state),typeof e=="function"&&(e=e(L({},n),this.props)),e&&L(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),ye(this))},R.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ye(this))},R.prototype.render=D,$=[],fe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,X=function(e,t){return e.__v.__b-t.__v.__b},j.__r=0,J=0,Y=ke(!1),Z=ke(!0);var Ze=0;function l(e,t,n,o,r,a){t||(t={});var d,u,c=t;if("ref"in c)for(u in c={},t)u=="ref"?d=t[u]:c[u]=t[u];var s={type:e,props:c,key:n,ref:d,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Ze,__i:-1,__u:0,__source:r,__self:a};if(typeof e=="function"&&(d=e.defaultProps))for(u in d)c[u]===void 0&&(c[u]=d[u]);return y.vnode&&y.vnode(s),s}var F,x,oe,Ce,W=0,Te=[],w=y,Me=w.__b,Le=w.__r,$e=w.diffed,Oe=w.__c,Pe=w.unmount,Ae=w.__;function re(e,t){w.__h&&w.__h(x,e,W||t),W=0;var n=x.__H||(x.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function P(e){return W=1,Qe(Ne,e)}function Qe(e,t,n){var o=re(F++,2);if(o.t=e,!o.__c&&(o.__=[Ne(void 0,t),function(u){var c=o.__N?o.__N[0]:o.__[0],s=o.t(c,u);c!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=x,!x.u)){var r=function(u,c,s){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(h){return!!h.__c});if(p.every(function(h){return!h.__N}))return!a||a.call(this,u,c,s);var i=!1;return p.forEach(function(h){if(h.__N){var _=h.__[0];h.__=h.__N,h.__N=void 0,_!==h.__[0]&&(i=!0)}}),!(!i&&o.__c.props===u)&&(!a||a.call(this,u,c,s))};x.u=!0;var a=x.shouldComponentUpdate,d=x.componentWillUpdate;x.componentWillUpdate=function(u,c,s){if(this.__e){var p=a;a=void 0,r(u,c,s),a=p}d&&d.call(this,u,c,s)},x.shouldComponentUpdate=r}return o.__N||o.__}function E(e,t){var n=re(F++,3);!w.__s&&Fe(n.__H,t)&&(n.__=e,n.i=t,x.__H.__h.push(n))}function A(e){return W=5,He(function(){return{current:e}},[])}function He(e,t){var n=re(F++,7);return Fe(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function et(){for(var e;e=Te.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(z),e.__H.__h.forEach(ie),e.__H.__h=[]}catch(t){e.__H.__h=[],w.__e(t,e.__v)}}w.__b=function(e){x=null,Me&&Me(e)},w.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ae&&Ae(e,t)},w.__r=function(e){Le&&Le(e),F=0;var t=(x=e.__c).__H;t&&(oe===x?(t.__h=[],x.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(t.__h.forEach(z),t.__h.forEach(ie),t.__h=[],F=0)),oe=x},w.diffed=function(e){$e&&$e(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Te.push(t)!==1&&Ce===w.requestAnimationFrame||((Ce=w.requestAnimationFrame)||tt)(et)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),oe=x=null},w.__c=function(e,t){t.some(function(n){try{n.__h.forEach(z),n.__h=n.__h.filter(function(o){return!o.__||ie(o)})}catch(o){t.some(function(r){r.__h&&(r.__h=[])}),t=[],w.__e(o,n.__v)}}),Oe&&Oe(e,t)},w.unmount=function(e){Pe&&Pe(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{z(o)}catch(r){t=r}}),n.__H=void 0,t&&w.__e(t,n.__v))};var Ie=typeof requestAnimationFrame=="function";function tt(e){var t,n=function(){clearTimeout(o),Ie&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);Ie&&(t=requestAnimationFrame(n))}function z(e){var t=x,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),x=t}function ie(e){var t=x;e.__c=e.__(),x=t}function Fe(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function Ne(e,t){return typeof t=="function"?t(e):t}const nt=['[role="grid"]',"[data-board]",".board","main .grid-3x3"],ot=['[role="gridcell"]',"[data-cell]",".cell","button","div"],rt=["[data-outcome]","[aria-live]",".result"];function Ue(){const e={candidates:[],chosen:null};let t=null,n=[];for(const r of nt){const a=Array.from(document.querySelectorAll(r));for(const d of a){const u=Array.from(d.querySelectorAll(ot.join(",")));if(u.length===9||at(d)){t=d,n=ct(u),e.chosen=r;break}}if(e.candidates.push(`${r}:${a.length}`),t)break}const o=it(rt);return{board:t,cells:n,outcome:o,debug:e}}function it(e){for(const t of e){const n=document.querySelector(t);if(n)return n}return null}function at(e){const t=e.getBoundingClientRect();return Math.abs(t.width-t.height)/Math.max(1,t.width)<.2}function ct(e){if(e.length===9)return e.slice(0,9);const t=e.filter(n=>st(n)).slice(0,9);return t.length===9?t:e.slice(0,9)}function st(e){const t=e.getAttribute("role");return e.tagName==="BUTTON"||e.onclick!=null||t==="button"||t==="gridcell"}function lt(e){return e?e.map(t=>{const n=(t.textContent||"").trim().toUpperCase();return n.includes("X")?"X":n.includes("O")?"O":null}):Array(9).fill(null)}function dt(e){const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const o of t){const[r,a,d]=o;if(e[r]&&e[r]===e[a]&&e[r]===e[d])return{winner:e[r],line:o,draw:!1}}return{winner:null,line:null,draw:e.every(Boolean)}}function ut(e){const t=e.filter(o=>o==="X").length,n=e.filter(o=>o==="O").length;return t<=n?"X":"O"}function q(e){const t=e.getState().discovery.cells,n=lt(t),{winner:o,line:r,draw:a}=dt(n);return{board:n,next:ut(n),winner:o,draw:a,winLine:r}}function pt(e){const t=e.target;if(!t)return!1;const n=t.tagName;return(t.getAttribute("contenteditable")||"").toLowerCase()==="true"||n==="INPUT"||n==="TEXTAREA"||t.type==="text"}function ae(e,t){const n=document.getElementById(e);n&&(n.textContent=t)}function _t(e,t){if(t)return;const n=document.createElement("canvas");n.width=e.clientWidth,n.height=e.clientHeight,n.style.position="absolute",n.style.inset="0",n.style.pointerEvents="none",e.appendChild(n);const o=n.getContext("2d"),r=Array.from({length:120},()=>({x:Math.random()*n.width,y:-10,vx:(Math.random()-.5)*4,vy:Math.random()*2+2,size:Math.random()*6+3,color:ft(),life:Math.random()*120+60}));let a=0;function d(){a++,o.clearRect(0,0,n.width,n.height);let u=0;for(const c of r)c.x+=c.vx,c.y+=c.vy,c.vy+=.05,c.life-=1,c.life>0&&c.y<n.height+20&&(u++,o.save(),o.translate(c.x,c.y),o.rotate((c.x+c.y+a)%360*Math.PI/180),o.fillStyle=c.color,o.fillRect(-c.size/2,-c.size/2,c.size,c.size),o.restore());u>0&&a<600?requestAnimationFrame(d):n.remove()}requestAnimationFrame(d)}function ft(){const e=["#6aa9ff","#30d158","#ff453a","#ffd60a","#f97316","#22c55e"];return e[Math.floor(Math.random()*e.length)]}let H=null;function ht(e=.2){G(440,.05,e)}function vt(e=.25){G(660,.08,e),setTimeout(()=>G(880,.12,e),90)}function mt(e=.25){G(330,.06,e)}function G(e,t,n){if(!H)try{H=new AudioContext}catch{return}const o=H.createOscillator(),r=H.createGain();o.connect(r),r.connect(H.destination),o.type="sine",o.frequency.value=e,r.gain.value=n,o.start(),o.stop(H.currentTime+t)}function gt(e=10){if("vibrate"in navigator)try{navigator.vibrate(e)}catch{}}function De(e,t,n){return Math.min(n,Math.max(t,e))}const yt=e=>l("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:[l("path",{d:"M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Z"}),l("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.5V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.5 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.5-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.5-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.5V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.5 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9c0 .65.38 1.24.97 1.5.2.09.42.13.64.13H21a2 2 0 1 1 0 4h-.09c-.22 0-.44.04-.64.13-.59.26-.97.85-.97 1.49Z"})]}),ce=e=>l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:[l("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),bt=e=>l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:[l("path",{d:"M9 9a3 3 0 1 1 6 0c0 2-3 2-3 4"}),l("line",{x1:"12",y1:"17",x2:"12",y2:"17"}),l("circle",{cx:"12",cy:"12",r:"10"})]}),xt=e=>l("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:[l("circle",{cx:"12",cy:"12",r:"10"}),l("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),l("line",{x1:"12",y1:"8",x2:"12",y2:"8"})]}),wt=e=>l("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",...e,children:l("polyline",{points:"9 18 15 12 9 6"})});let kt=1;const se=new Set;function le(e){const t={id:kt++,text:e};se.forEach(n=>n(t))}function St(){const[e,t]=P([]);return E(()=>{const n=o=>{t(r=>[...r,o]),setTimeout(()=>t(r=>r.filter(a=>a.id!==o.id)),2400)};return se.add(n),()=>{se.delete(n)}},[]),l("div",{"aria-live":"polite",class:"ttt-toasts",children:e.map(n=>l("div",{class:"ttt-toast",role:"status",children:n.text}))})}function Et({store:e}){const{prefs:t,panelOpen:n}=e.getState(),o=A(null),[r,a]=P(n);E(()=>{const s=e.subscribe(p=>a(p.panelOpen));return()=>s()},[]),E(()=>{function s(p){p.key==="Escape"&&e.setState({panelOpen:!1})}return r&&document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[r]);function d(s,p){e.setState({prefs:{...e.getState().prefs,[s]:p}})}function u(){const s=JSON.stringify({prefs:e.getState().prefs},null,2),p=new Blob([s],{type:"application/json"}),i=document.createElement("a");i.href=URL.createObjectURL(p),i.download="ttt-ui-enhancer-preferences.json",i.click(),URL.revokeObjectURL(i.href)}function c(s){var i;const p=(i=s.target.files)==null?void 0:i[0];p&&p.text().then(h=>{try{const _=JSON.parse(h);_&&_.prefs&&(e.setState({prefs:{...e.getState().prefs,..._.prefs}}),le("Preferences imported"))}catch{}})}return l("div",{class:"ttt-enhancer","aria-live":"polite",children:[l("a",{class:"ttt-skip",href:"#",onClick:s=>{var p,i;s.preventDefault(),(i=(p=e.getState().discovery.board)==null?void 0:p.focus)==null||i.call(p)},children:"Skip to Game Board"}),l("button",{class:"ttt-gear","aria-label":"Open settings",onClick:()=>e.setState({panelOpen:!r}),children:l(yt,{})}),l("div",{ref:o,class:"ttt-panel"+(r?" open":""),role:"dialog","aria-modal":"false","aria-label":"UI Enhancer Settings",children:[l("div",{class:"ttt-panel-header",children:[l("div",{class:"ttt-panel-title",children:"UI Enhancer"}),l("button",{class:"ttt-enhancer","aria-label":"Close",onClick:()=>e.setState({panelOpen:!1}),style:"pointer-events:auto;background:none;border:none;color:inherit;cursor:pointer",children:l(ce,{})})]}),l("div",{class:"ttt-panel-body",children:[l("div",{class:"ttt-panel-controls",children:[l("div",{class:"ttt-row",children:[l("label",{htmlFor:"theme",children:"Theme"}),l("select",{id:"theme",class:"ttt-select",value:t.theme,onChange:s=>d("theme",s.currentTarget.value),children:[l("option",{value:"light",children:"Light"}),l("option",{value:"dark",children:"Dark"}),l("option",{value:"high-contrast",children:"High Contrast"}),l("option",{value:"protanopia",children:"Protanopia-safe"}),l("option",{value:"deuteranopia",children:"Deuteranopia-safe"}),l("option",{value:"tritanopia",children:"Tritanopia-safe"})]})]}),l("div",{class:"ttt-row",children:[l("label",{htmlFor:"font",children:"Font Size"}),l("input",{id:"font",class:"ttt-input",type:"range",min:"0.9",max:"1.3",step:"0.05",value:t.fontScale,onInput:s=>d("fontScale",De(parseFloat(s.currentTarget.value),.9,1.3))})," ",l("span",{children:[Math.round(t.fontScale*100),"%"]})]}),l("div",{class:"ttt-row",children:[l("label",{htmlFor:"rm",children:"Reduce Motion"}),l("input",{id:"rm",class:"ttt-checkbox",type:"checkbox",checked:t.reduceMotion,onChange:s=>d("reduceMotion",!!s.currentTarget.checked)})]}),l("div",{class:"ttt-row",children:[l("label",{htmlFor:"gm",children:"Ghost Marks"}),l("input",{id:"gm",class:"ttt-checkbox",type:"checkbox",checked:t.ghostMarks,onChange:s=>d("ghostMarks",!!s.currentTarget.checked)})]}),l("div",{class:"ttt-row",children:[l("label",{htmlFor:"snd",children:"Sounds"}),l("input",{id:"snd",class:"ttt-checkbox",type:"checkbox",checked:t.sounds,onChange:s=>d("sounds",!!s.currentTarget.checked)})]}),l("div",{class:"ttt-row",children:[l("label",{htmlFor:"vol",children:"Volume"}),l("input",{id:"vol",class:"ttt-input",type:"range",min:"0",max:"1",step:"0.05",value:t.volume,onInput:s=>d("volume",De(parseFloat(s.currentTarget.value),0,1))})," ",l("span",{children:[Math.round(t.volume*100),"%"]})]}),l("div",{class:"ttt-row",children:[l("label",{htmlFor:"hap",children:"Haptics"}),l("input",{id:"hap",class:"ttt-checkbox",type:"checkbox",checked:t.haptics,onChange:s=>d("haptics",!!s.currentTarget.checked)})]}),l("div",{class:"ttt-row",children:[l("label",{htmlFor:"tts",children:"Tooltips"}),l("input",{id:"tts",class:"ttt-checkbox",type:"checkbox",checked:t.tooltips,onChange:s=>d("tooltips",!!s.currentTarget.checked)})]}),l("div",{class:"ttt-row",children:[l("label",{htmlFor:"tips",children:"Tips on Start"}),l("input",{id:"tips",class:"ttt-checkbox",type:"checkbox",checked:t.tipsOnStart,onChange:s=>d("tipsOnStart",!!s.currentTarget.checked)})]}),l("div",{class:"ttt-row",children:[l("label",{htmlFor:"dys",children:"Dyslexia-friendly Font"}),l("input",{id:"dys",class:"ttt-checkbox",type:"checkbox",checked:t.dyslexiaFont,onChange:s=>d("dyslexiaFont",!!s.currentTarget.checked)})]}),l("div",{style:"display:flex; gap:8px; align-items:center;",children:[l("button",{class:"ttt-enhancer",onClick:u,style:"pointer-events:auto;background:var(--color-surface);border:1px solid rgba(255,255,255,.15);border-radius:8px;padding:6px 10px;color:inherit;cursor:pointer",children:"Export"}),l("label",{class:"ttt-enhancer",style:"pointer-events:auto;background:var(--color-surface);border:1px solid rgba(255,255,255,.15);border-radius:8px;padding:6px 10px;color:inherit;cursor:pointer",children:["Import ",l("input",{type:"file",accept:"application/json",style:"display:none",onChange:c})]}),l("span",{style:"display:inline-flex; align-items:center; gap:6px; opacity:.8",children:[l(xt,{})," Preferences stored locally"]})]})]}),l("div",{style:"margin-top:10px; display:flex; gap:8px; align-items:center; opacity:.8",children:[l(bt,{}),"Press ? for keyboard shortcuts"]})]})]})]})}function Ct({store:e}){const{shortcutsOpen:t}=e.getState();E(()=>{const o=r=>{r.key==="Escape"&&n()};return t&&document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[t]);function n(){e.setState({shortcutsOpen:!1})}return l("div",{class:"ttt-shortcuts"+(t?" open":""),role:"dialog","aria-modal":"false","aria-label":"Keyboard Shortcuts",children:l("div",{class:"ttt-shortcuts-panel",children:[l("div",{style:"display:flex; align-items:center; justify-content:space-between; margin-bottom:8px;",children:[l("div",{style:"font-weight:600",children:"Keyboard Shortcuts"}),l("button",{class:"ttt-enhancer","aria-label":"Close",onClick:n,style:"pointer-events:auto;background:none;border:none;color:inherit;cursor:pointer",children:l(ce,{})})]}),l("ul",{style:"line-height:1.8",children:[l("li",{children:"?: Open this help"}),l("li",{children:"Arrow keys: Navigate squares"}),l("li",{children:"Enter/Space: Activate square"}),l("li",{children:"Esc: Close panels or overlays"})]}),l("p",{style:"opacity:.8; font-size:13px",children:"Note: We do not override the host app’s handlers; navigation hints are additive."})]})})}const Re="ttt-ui-enhancer:coach-dismissed";function Tt({store:e}){const[t,n]=P(!1),[o,r]=P(0),a=A(null),d=A(null),{prefs:u,discovery:c}=e.getState(),s=[{key:"board",title:"Game Board",body:"Overlay adds focus rings, previews, and winning animations.",anchor:c.board||void 0},{key:"new",title:"New Game",body:"Use the host app’s new game button to restart. We never replace controls.",anchor:document.querySelector("[data-new], .new-game, button")||void 0},{key:"outcome",title:"Outcome",body:"Wins show an animated line and optional confetti.",anchor:c.outcome||c.board||void 0}];E(()=>{if(!u.tipsOnStart||localStorage.getItem(Re)==="1")return;const g=setTimeout(()=>n(!0),800);return()=>clearTimeout(g)},[u.tipsOnStart]),E(()=>{if(!t)return;p();const g=new ResizeObserver(p);return g.observe(document.documentElement),()=>g.disconnect()},[t,o,c.board]);function p(){var C;const f=(C=s[o].anchor)==null?void 0:C.getBoundingClientRect();if(!f)return;const v=a.current;v.style.left=`${f.left-6}px`,v.style.top=`${f.top-6}px`,v.style.width=`${f.width+12}px`,v.style.height=`${f.height+12}px`;const S=d.current,b=Math.min(window.innerWidth-S.offsetWidth-12,Math.max(12,f.left+f.width+10)),M=Math.min(window.innerHeight-S.offsetHeight-12,Math.max(12,f.top));S.style.left=`${b}px`,S.style.top=`${M}px`}function i(){r(g=>Math.min(g+1,s.length-1))}function h(){r(g=>Math.max(g-1,0))}function _(){n(!1)}function m(){localStorage.setItem(Re,"1"),n(!1)}if(!t)return null;const k=s[o];return l("div",{class:"ttt-enhancer","aria-live":"polite",children:[l("div",{class:"ttt-coach-scrim open"}),l("div",{class:"ttt-coach-highlight",ref:a}),l("div",{class:"ttt-coach-panel",ref:d,role:"dialog","aria-label":k.title,children:[l("div",{style:"display:flex; justify-content:space-between; align-items:center; gap:8px; margin-bottom:6px;",children:[l("div",{style:"font-weight:600",children:k.title}),l("button",{class:"ttt-enhancer","aria-label":"Close",onClick:_,style:"pointer-events:auto;background:none;border:none;color:inherit;cursor:pointer",children:l(ce,{})})]}),l("div",{style:"opacity:.9; margin-bottom:8px;",children:k.body}),l("div",{style:"display:flex; justify-content:space-between; align-items:center; gap:8px;",children:[l("button",{class:"ttt-enhancer",onClick:m,style:"pointer-events:auto;background:none;border:none;color:inherit;opacity:.8;cursor:pointer",children:"Don’t show again"}),l("div",{style:"display:flex; align-items:center; gap:6px;",children:[l("button",{disabled:o===0,class:"ttt-enhancer",onClick:h,style:"pointer-events:auto;background:none;border:1px solid rgba(255,255,255,.15);border-radius:8px;padding:4px 8px;color:inherit;opacity:${idx===0?'.5':'1'};cursor:${idx===0?'not-allowed':'pointer'}",children:"Prev"}),l("button",{disabled:o===s.length-1,class:"ttt-enhancer",onClick:i,style:"pointer-events:auto;background:var(--color-accent);border:none;border-radius:8px;padding:4px 10px;color:black;cursor:${idx===steps.length-1?'not-allowed':'pointer'}",children:["Next ",l(wt,{})]})]})]}),l("div",{style:"margin-top:6px; font-size:12px; opacity:.7",children:["Step ",o+1," of ",s.length]})]})]})}function Mt({store:e,liveRegionId:t}){var s;const[n,o]=P(()=>q(e)),[r,a]=P(!1),d=A(null),u=A(n.board);E(()=>{const p=e.subscribe(()=>{const i=q(e);o(i),a(!!e.getState().discovery.board)});return a(!!e.getState().discovery.board),()=>p()},[]),E(()=>{const p=e.getState().prefs,i=u.current;if(n.board.findIndex((m,k)=>m&&m!==i[k])>=0&&(p.sounds&&ht(p.volume),p.haptics&&gt(8)),u.current=n.board.slice(),n.winner){ae(t,`${n.winner} wins!`);const m=e.getState().prefs;!m.reduceMotion&&d.current&&_t(d.current,m.reduceMotion),m.sounds&&vt(m.volume),le(`${n.winner} wins!`)}else if(n.draw){ae(t,"Game is a draw");const m=e.getState().prefs;m.sounds&&mt(m.volume),le("Draw game")}else ae(t,`${n.next}'s turn`)},[n.winner,n.draw,n.board,n.next]),E(()=>{const p=i=>{var h,_;if(!(pt(i)||i.defaultPrevented)&&((i.key==="?"||i.shiftKey&&i.key==="/")&&e.setState({shortcutsOpen:!0}),["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(i.key))){const m=e.getState().discovery.cells||[],k=document.activeElement;!m.includes(k)&&m[0]&&((_=(h=m[0]).focus)==null||_.call(h))}};return window.addEventListener("keydown",p,{capture:!0}),()=>window.removeEventListener("keydown",p,{capture:!0})},[]);const c=He(()=>{const p=e.getState().discovery.board;if(!p)return{display:"none"};const i=p.getBoundingClientRect();return{position:"fixed",left:`${i.left}px`,top:`${i.top}px`,width:`${i.width}px`,height:`${i.height}px`}},[e.getState().discovery.board,n.board]);return l("div",{class:"ttt-enhancer",children:[!r&&l("div",{class:"ttt-toast",style:"position:fixed; right:12px; bottom:12px; pointer-events:none;",children:"UI Enhancer idle—app not detected."}),l("div",{ref:d,class:"ttt-overlay",style:c,"aria-hidden":"true",children:l(Lt,{store:e,statusKey:`${n.board.join("")}-${((s=n.winLine)==null?void 0:s.join("-"))||"none"}`})}),l(Et,{store:e}),l(Ct,{store:e}),l(Tt,{store:e}),l(St,{})]})}function Lt({store:e,statusKey:t}){const[n,o]=P(null),r=A(null);E(()=>{var c;a();const d=new ResizeObserver(a),u=(c=r.current)==null?void 0:c.parentElement;return u&&d.observe(u),()=>d.disconnect()},[t]),E(()=>{const d=e.getState().discovery.cells||[],u=s=>()=>o(s),c=()=>o(null);return d.forEach((s,p)=>{s.addEventListener("mouseenter",u(p)),s.addEventListener("mouseleave",c),s.addEventListener("focus",u(p)),s.addEventListener("blur",c)}),()=>d.forEach((s,p)=>{s.removeEventListener("mouseenter",u(p)),s.removeEventListener("mouseleave",c),s.removeEventListener("focus",u(p)),s.removeEventListener("blur",c)})},[e.getState().discovery.cells]);function a(){const d=r.current;if(!d)return;const u=d.parentElement;d.width=u.clientWidth,d.height=u.clientHeight;const c=d.getContext("2d");c.clearRect(0,0,d.width,d.height);const s=d.width,p=d.height,i=Math.min(s,p)/3,h=(s-i*3)/2,_=(p-i*3)/2;c.strokeStyle="rgba(255,255,255,0.18)",c.lineWidth=2;for(let g=1;g<3;g++){const f=Math.round(h+i*g)+.5,v=Math.round(_+i*g)+.5;c.beginPath(),c.moveTo(f,_),c.lineTo(f,_+i*3),c.stroke(),c.beginPath(),c.moveTo(h,v),c.lineTo(h+i*3,v),c.stroke()}const m=q(e);if(m.winLine){c.strokeStyle=getComputedStyle(document.querySelector(".ttt-enhancer-root")||document.body).getPropertyValue("--color-win").trim()||"#30d158",c.lineWidth=6,c.lineCap="round";const[g,f,v]=m.winLine,S=C=>({x:h+i*(C%3)+i/2,y:_+i*Math.floor(C/3)+i/2}),b=S(g),M=S(v);$t(c,b.x,b.y,M.x,M.y)}if(e.getState().prefs.ghostMarks&&n!=null){const g=q(e),f=n,v=h+i*(f%3)+i/2,S=_+i*Math.floor(f/3)+i/2;if(c.save(),c.strokeStyle="rgba(106,169,255,0.75)",c.lineWidth=2,c.setLineDash([6,4]),c.strokeRect(h+i*(f%3)+6,_+i*Math.floor(f/3)+6,i-12,i-12),c.restore(),c.save(),c.globalAlpha=.35,c.strokeStyle=getComputedStyle(document.querySelector(".ttt-enhancer-root")||document.body).getPropertyValue("--color-accent").trim()||"#6aa9ff",c.lineWidth=3,g.next==="X"){const b=i*.28;c.beginPath(),c.moveTo(v-b,S-b),c.lineTo(v+b,S+b),c.stroke(),c.beginPath(),c.moveTo(v+b,S-b),c.lineTo(v-b,S+b),c.stroke()}else c.beginPath(),c.arc(v,S,i*.32,0,Math.PI*2),c.stroke();c.restore()}}return l("canvas",{ref:r,class:"ttt-canvas","aria-hidden":"true"})}function $t(e,t,n,o,r){let d=0;const u=matchMedia("(prefers-reduced-motion: reduce)").matches,c=()=>{d++;const s=u?1:Math.min(1,d/24),p=t+(o-t)*s,i=n+(r-n)*s;e.beginPath(),e.moveTo(t,n),e.lineTo(p,i),e.stroke(),!u&&s<1&&requestAnimationFrame(c)};c()}const Ot=':root .ttt-enhancer,.ttt-enhancer :root{--color-bg: #0b0c0f;--color-surface: #151821;--color-text: #e6eaf2;--color-muted: #a7b0c3;--color-accent: #6aa9ff;--color-win: #30d158;--color-lose: #ff453a;--color-draw: #ffd60a;--ring-focus: 0 0 0 3px rgba(106, 169, 255, .55);--shadow-sm: 0 1px 2px rgba(0,0,0,.2);--shadow-md: 0 8px 20px rgba(0,0,0,.35);--shadow-lg: 0 22px 60px rgba(0,0,0,.45);--radius-sm: 6px;--radius-md: 10px;--radius-lg: 16px;--radius-xl: 24px;--space-1: 4px;--space-2: 8px;--space-3: 12px;--space-4: 16px;--space-5: 24px;--space-6: 32px;--space-7: 48px;--space-8: 64px;--font-sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Ubuntu, Cantarell, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";--font-dyslexia: "OpenDyslexic", var(--font-sans);--font-scale: 1;--panel-bg: color-mix(in srgb, var(--color-surface) 85%, black 15%);--panel-border: 1px solid rgba(255,255,255,.08)}.ttt-enhancer{--safe-top: env(safe-area-inset-top, 0px);--safe-right: env(safe-area-inset-right, 0px);--safe-bottom: env(safe-area-inset-bottom, 0px);--safe-left: env(safe-area-inset-left, 0px);font-family:var(--font-sans)}.ttt-enhancer-root{z-index:2147483646}.ttt-enhancer .ttt-gear{position:fixed;right:calc(12px + var(--safe-right));bottom:calc(12px + var(--safe-bottom));width:44px;height:44px;border-radius:999px;background:var(--panel-bg);box-shadow:var(--shadow-md);border:var(--panel-border);display:grid;place-items:center;color:var(--color-text);pointer-events:auto;cursor:pointer}.ttt-enhancer .ttt-gear:focus-visible{outline:none;box-shadow:var(--ring-focus)}.ttt-enhancer .ttt-panel{position:fixed;pointer-events:auto;right:calc(12px + var(--safe-right));bottom:calc(64px + 20px + var(--safe-bottom));width:min(420px,calc(100vw - 24px));max-height:min(70vh,calc(100vh - 160px));background:var(--panel-bg);color:var(--color-text);border-radius:var(--radius-lg);border:var(--panel-border);box-shadow:var(--shadow-lg);overflow:hidden;display:none}.ttt-enhancer .ttt-panel.open{display:grid;grid-template-rows:auto 1fr}.ttt-enhancer .ttt-panel-header{display:flex;align-items:center;justify-content:space-between;padding:var(--space-3) var(--space-4);border-bottom:var(--panel-border)}.ttt-enhancer .ttt-panel-title{font-weight:600}.ttt-enhancer .ttt-panel-body{padding:var(--space-4);overflow:auto}.ttt-enhancer .ttt-panel-controls{display:grid;gap:var(--space-3)}.ttt-enhancer .ttt-row{display:flex;align-items:center;justify-content:space-between;gap:var(--space-3)}.ttt-enhancer .ttt-row>label{font-size:14px;color:var(--color-muted)}.ttt-enhancer .ttt-select,.ttt-enhancer .ttt-input,.ttt-enhancer .ttt-checkbox{pointer-events:auto}.ttt-enhancer .ttt-skip{position:fixed;left:calc(8px + var(--safe-left));top:calc(8px + var(--safe-top));padding:8px 12px;background:var(--color-surface);color:var(--color-text);border-radius:var(--radius-md);border:var(--panel-border);box-shadow:var(--shadow-sm);opacity:0;pointer-events:none;transform:translateY(-6px)}.ttt-enhancer .ttt-skip:focus{opacity:1;pointer-events:auto;transform:none;box-shadow:var(--ring-focus);outline:none}.ttt-enhancer .ttt-tooltip{position:fixed;background:var(--color-surface);color:var(--color-text);border:var(--panel-border);border-radius:var(--radius-sm);box-shadow:var(--shadow-sm);padding:6px 8px;font-size:12px;opacity:0;pointer-events:none;transition:opacity .12s ease}.ttt-enhancer .ttt-tooltip.show{opacity:1}.ttt-enhancer .ttt-toasts{position:fixed;left:50%;transform:translate(-50%);bottom:calc(80px + var(--safe-bottom));display:grid;gap:8px;pointer-events:none}.ttt-enhancer .ttt-toast{background:var(--color-surface);color:var(--color-text);border:var(--panel-border);border-radius:var(--radius-md);box-shadow:var(--shadow-md);padding:8px 12px}.ttt-enhancer .ttt-overlay{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.ttt-enhancer .ttt-canvas{position:absolute;top:0;right:0;bottom:0;left:0}.ttt-enhancer .ttt-shortcuts{position:fixed;top:0;right:0;bottom:0;left:0;display:none;align-items:center;justify-content:center;background:#00000080;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);pointer-events:auto}.ttt-enhancer .ttt-shortcuts.open{display:flex}.ttt-enhancer .ttt-shortcuts-panel{width:min(720px,92vw);max-height:80vh;overflow:auto;background:var(--panel-bg);color:var(--color-text);border:var(--panel-border);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);padding:18px 20px}.ttt-enhancer .ttt-coach-scrim{position:fixed;top:0;right:0;bottom:0;left:0;background:#0000008c;pointer-events:auto;display:none}.ttt-enhancer .ttt-coach-scrim.open{display:block}.ttt-enhancer .ttt-coach-highlight{position:fixed;border-radius:12px;outline:2px dashed var(--color-accent);outline-offset:2px;pointer-events:none}.ttt-enhancer .ttt-coach-panel{position:fixed;max-width:min(420px,92vw);background:var(--panel-bg);color:var(--color-text);border:var(--panel-border);border-radius:var(--radius-lg);box-shadow:var(--shadow-md);padding:12px 14px;pointer-events:auto}.ttt-enhancer .ttt-skeleton{background:linear-gradient(90deg,#ffffff0f,#ffffff1f,#ffffff0f);background-size:200% 100%;animation:ttt-shimmer 1.2s infinite}@keyframes ttt-shimmer{0%{background-position:200% 0}to{background-position:-200% 0}}.ttt-enhancer{font-size:calc(16px * var(--font-scale))}.ttt-enhancer .hc-text{color:var(--color-text);text-shadow:0 1px 0 rgba(0,0,0,.6)}',Pt=".ttt-enhancer.theme-light{--color-bg: #f7f8fb;--color-surface: #ffffff;--color-text: #0b0c0f;--color-muted: #4b5563;--color-accent: #3b82f6;--color-win: #16a34a;--color-lose: #dc2626;--color-draw: #ca8a04}",At=".ttt-enhancer.theme-dark{--color-bg: #0b0c0f;--color-surface: #151821;--color-text: #e6eaf2;--color-muted: #a7b0c3;--color-accent: #6aa9ff;--color-win: #30d158;--color-lose: #ff453a;--color-draw: #ffd60a}",Ht=".ttt-enhancer.theme-high-contrast{--color-bg: #000000;--color-surface: #000000;--color-text: #ffffff;--color-muted: #e5e7eb;--color-accent: #ffff00;--color-win: #00ff00;--color-lose: #ff0000;--color-draw: #00ffff;--ring-focus: 0 0 0 3px rgba(255, 255, 0, .9)}",It=".ttt-enhancer.theme-protanopia{--color-accent: #0ea5e9;--color-win: #10b981;--color-lose: #f97316}",Ft=".ttt-enhancer.theme-deuteranopia{--color-accent: #0ea5e9;--color-win: #22c55e;--color-lose: #eab308}",Nt=".ttt-enhancer.theme-tritanopia{--color-accent: #f97316;--color-win: #22c55e;--color-lose: #ef4444}",Ut=".ttt-enhancer.font-dyslexia{--font-sans: var(--font-dyslexia)}";function Dt(e){if(document.getElementById(e))return;const t=document.createElement("style");t.id=e,t.textContent=[Ot,Pt,At,Ht,It,Ft,Nt,Ut].join(`

`),document.head.appendChild(t)}const je="ttt-ui-enhancer:v1";function Rt(){try{const e="__ttt_test__";return window.localStorage.setItem(e,"1"),window.localStorage.removeItem(e),window.localStorage}catch{let e={};return{getItem:t=>t in e?e[t]:null,setItem:(t,n)=>{e[t]=String(n)}}}}const Be=Rt();function jt(){const e=Be.getItem(je),t={prefs:{theme:"dark",fontScale:1,reduceMotion:matchMedia("(prefers-reduced-motion: reduce)").matches,ghostMarks:!0,sounds:!1,volume:.3,haptics:!1,tooltips:!0,tipsOnStart:!0,dyslexiaFont:!1},discovery:{board:null,cells:[],outcome:null,debug:{candidates:[],chosen:null}},panelOpen:!1,shortcutsOpen:!1};if(e)try{const n=JSON.parse(e);Object.assign(t.prefs,n.prefs||n)}catch{}return t}function Bt(e){let t=e;const n=new Set,o={getState:()=>t,setState:r=>{t={...t,...r,prefs:{...t.prefs,...r.prefs}},We(t.prefs),n.forEach(a=>Wt(()=>a(t)))},subscribe:r=>(n.add(r),()=>n.delete(r))};return We(t.prefs),ze(t.prefs),o}function We(e){Be.setItem(je,JSON.stringify({prefs:e})),ze(e)}function ze(e){const t=document.querySelector(".ttt-enhancer-root"),n=t==null?void 0:t.classList;n&&(n.remove("theme-light","theme-dark","theme-high-contrast","theme-protanopia","theme-deuteranopia","theme-tritanopia","font-dyslexia"),n.add(`theme-${e.theme}`),e.dyslexiaFont&&n.add("font-dyslexia"),t.style.setProperty("--font-scale",String(e.fontScale)))}function Wt(e){try{e()}catch{}}function zt(e){const t=new MutationObserver(()=>e());t.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0,characterData:!0});const n=new ResizeObserver(()=>e());n.observe(document.documentElement);const o=()=>{try{t.disconnect()}catch{}try{n.disconnect()}catch{}};return window.addEventListener("hashchange",e),window.addEventListener("popstate",e),()=>{o(),window.removeEventListener("hashchange",e),window.removeEventListener("popstate",e)}}let de=!1;function qe(){if(de)return;de=!0;const e="ttt-ui-enhancer-root",t="ttt-ui-enhancer-styles",n=document.getElementById(e);n&&n.remove(),Dt(t);const o=document.createElement("div");o.id=e,o.className="ttt-enhancer-root ttt-enhancer",o.style.position="fixed",o.style.inset="0",o.style.pointerEvents="none",o.setAttribute("aria-hidden","true"),document.body.appendChild(o);const r=document.createElement("div");r.id="ttt-ui-enhancer-live",r.className="ttt-enhancer",r.setAttribute("aria-live","polite"),r.setAttribute("role","status"),r.style.position="fixed",r.style.left="-9999px",r.style.top="auto",r.style.width="1px",r.style.height="1px",document.body.appendChild(r);const a=Bt(jt()),d=Ue(),u=zt(()=>{const c=Ue();a.setState({discovery:c})});a.setState({discovery:d}),Ee(me(Mt,{store:a,liveRegionId:r.id}),o),window.addEventListener("pagehide",()=>{try{u()}catch{}try{Ee(null,o)}catch{}try{o.remove()}catch{}try{r.remove()}catch{}de=!1})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>qe()):qe()})();
